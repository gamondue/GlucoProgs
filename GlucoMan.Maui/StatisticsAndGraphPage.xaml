<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:strings="clr-namespace:GlucoMan.Maui.Resources.Strings"
             x:Class="GlucoMan.Maui.StatisticsAndGraphPage"
             Title="{x:Static strings:AppStrings.StatisticsAndGraphPageTitle}">
    <ScrollView Padding="10,5,10,5">
        <VerticalStackLayout Spacing="8">
            
            <!-- Date and Time Range Section -->
            <Label x:Name="lblSelectTimeRange" 
                   Text="{x:Static strings:AppStrings.SelectTimeRange}"
                   FontSize="15" 
                   FontAttributes="Bold"
                   Margin="0,8,0,3"/>
            
            <!-- Date and Time Selection Frame -->
            <Frame Padding="8" 
                   CornerRadius="6"
                   BorderColor="#bdc3c7"
                   BackgroundColor="#ecf0f1"
                   HasShadow="False"
                   Margin="3,0,3,2">
                
                <Grid RowDefinitions="Auto,Auto" 
                      ColumnDefinitions="40,*,40,*"
                      RowSpacing="5"
                      ColumnSpacing="6">

                    <!-- To column -->
                    <Label x:Name="lblTo" 
                           Text="{x:Static strings:AppStrings.DateLabel}"
                           Grid.Row="0" Grid.Column="0"
                           VerticalOptions="Center"
                           HorizontalOptions="End"
                           FontSize="13"
                           FontAttributes="Bold"
                           TextColor="#27ae60"
                           Margin="0,0,2,0"/>
                    
                    <DatePicker x:Name="datePicker" 
                                Grid.Row="0" Grid.Column="1"
                                Format="dd/MM/yyyy"
                                BackgroundColor="#d5f4e6"
                                TextColor="Black"
                                VerticalOptions="Center"
                                HorizontalOptions="Fill"
                                ToolTipProperties.Text="{x:Static strings:AppStrings.TooltipToDate}"
                                HeightRequest="34"/>

                    <!-- Number of weeks label and entry placed below the date pickers, centered across columns -->
                    <HorizontalStackLayout Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2"
                                           HorizontalOptions="Center" Spacing="8" Margin="0,8,0,0">
                        <Label x:Name="lblNoOfWeeks" Text="No of weeks"
                               VerticalOptions="Center"
                               HorizontalOptions="End"
                               FontSize="13"
                               FontAttributes="Bold"
                               TextColor="#27ae60"
                               ToolTipProperties.Text="{x:Static strings:AppStrings.labelNoOfWeeks}"
                               />
                        <Entry x:Name="txtNoOfWeeks"
                               WidthRequest="40"
                               HorizontalTextAlignment="Center"
                               Keyboard="Numeric"
                               Placeholder="No of weeks"
                               Text="2"/>
                    </HorizontalStackLayout>
                </Grid>
            </Frame>
            
            <!-- Statistics and Chart Images (clickable) -->
            <Grid ColumnDefinitions="*,*" 
                  ColumnSpacing="15"
                  Margin="0,3,0,5">
                
                <Image x:Name="imgStatistics" 
                       Source="statistics_no_axis.png"
                       Grid.Column="0"
                       HeightRequest="65"
                       VerticalOptions="Center" 
                       HorizontalOptions="Fill"
                       ToolTipProperties.Text="{x:Static strings:AppStrings.TooltipStatistics}"
                       Aspect="AspectFit">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="btnStatistics_Clicked" />
                    </Image.GestureRecognizers>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="PointerOver">
                                <VisualState.Setters>
                                    <Setter Property="Opacity" Value="0.7" />
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Image>
                
                <Image x:Name="imgChart" 
                       Source="chart.png"
                       Grid.Column="1"
                       HeightRequest="70"
                       VerticalOptions="Center" 
                       HorizontalOptions="Fill"
                       ToolTipProperties.Text="{x:Static strings:AppStrings.TooltipChart}"
                       Aspect="AspectFit">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="btnChart_Clicked" />
                    </Image.GestureRecognizers>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="PointerOver">
                                <VisualState.Setters>
                                    <Setter Property="Opacity" Value="0.7" />
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Image>
            </Grid>
            
            <!-- Import Data Section -->
            <BoxView HeightRequest="2" 
                     Color="#34495e" 
                     Margin="0,8,0,8"/>
            <Label x:Name="lblImportSensor" 
                   Text="{x:Static strings:AppStrings.ImportSensorTitle}"
                   HorizontalOptions="Center"
                   FontSize="16" 
                   FontAttributes="Bold"
                   Margin="0,0,0,5"/>
            <!-- Import Sensor Data Image (clickable) -->
            <Image x:Name="imgImportSensor" 
                   Source="sensor2app.png"
                   HeightRequest="70"
                   VerticalOptions="Center" 
                   HorizontalOptions="Center"
                   ToolTipProperties.Text="{x:Static strings:AppStrings.TooltipImportSensor}"
                   Aspect="AspectFit">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="btnImportGlucose_Clicked" />
                </Image.GestureRecognizers>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal" />
                        <VisualState x:Name="PointerOver">
                            <VisualState.Setters>
                                <Setter Property="Opacity" Value="0.7" />
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
            </Image>
            <Button x:Name="btnIdentify" 
                        Text="Identifications"
                        Clicked="btnIdentification_Click"
                        HorizontalOptions="Center"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>

