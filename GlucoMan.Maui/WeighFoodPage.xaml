<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:res="clr-namespace:GlucoMan.Maui.Resources.Strings"
             x:Class="GlucoMan.Maui.WeighFoodPage"
             Title="{x:Static res:AppStrings.WeighingYourPortion}">
    <ContentPage.Content>
        <ScrollView Padding="5,5,5,5">
            <!--Grid of all the page-->
            <Grid 
                RowDefinitions="50, 
                    Auto,Auto,30,Auto,30,
                    Auto,35,60,90,Auto,
                    Auto">

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="80" />
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" 
                            x:Name="btnChoose" 
                            ImageSource="choose.png"
                            BackgroundColor="LightGreen" 
                            TextColor="Black"
                            FontAttributes="Bold"
                            HeightRequest="50"
                            ToolTipProperties.Text="{x:Static res:AppStrings.TooltipChooseWeighFood}"
                            Clicked="btnChoose_Click" />

                    <Button Grid.Column="1" 
                            x:Name="btnBack" 
                            ImageSource="escape.png"
                            BackgroundColor="LightCoral" 
                            TextColor="White"
                            FontAttributes="Bold"
                            HeightRequest="50"
                            ToolTipProperties.Text="{x:Static res:AppStrings.TooltipEscapeWeighFood}"
                            Clicked="btnBack_Click" />

                    <Button Grid.Column="2" 
                            x:Name="btnClear" 
                            ImageSource="clear_fields.png"
                            BackgroundColor="LightGreen" 
                            TextColor="White"
                            FontAttributes="Bold"
                            HeightRequest="50"
                            ToolTipProperties.Text="{x:Static res:AppStrings.TooltipClearWeighFood}"
                            Clicked="btnClearFields_Click" />
                </Grid>

                <Label Grid.Row="1" 
                       Text="{x:Static res:AppStrings.WeighFoodToGetWeight}"
                       VerticalOptions="Center" HorizontalOptions="Center"
                       FontAttributes="Bold" FontSize="Medium"
                       Margin="5,0,0,10" />
                <Grid Grid.Row="2" Grid.Column="0"
                      Margin="0,5,0,10"
                      RowDefinitions="Auto,60"
                      ColumnDefinitions="*,50,Auto,65">
                    <!--Name of the food, CHO%, CHO is of raw checkbox, calculator button-->
                    <Label Grid.Row="0" Grid.Column="0" Text="{x:Static res:AppStrings.NameLabel}"
                        HorizontalTextAlignment="Center" VerticalTextAlignment="End"/>
                    <Entry x:Name="txtFoodName"
                        Grid.Row="1" Grid.Column="0"
                        BackgroundColor="LightGreen" TextColor="Black"
                        ToolTipProperties.Text="{x:Static res:AppStrings.TooltipFoodName}"
                           TextChanged="txtFoodName_TextChanged"
                        Margin="2" HorizontalTextAlignment="Start"/>

                    <Label Grid.Row="0" Grid.Column="1" Text="{x:Static res:AppStrings.CHOPercentLabel}"
                        HorizontalTextAlignment="Center" VerticalTextAlignment="End"
                        FontSize="12"/>
                    <Entry Grid.Row="1" Grid.Column="1" 
                        x:Name="txtFoodCarbohydratesPerUnit" 
                        BackgroundColor="GreenYellow" TextColor="Black"
                        Margin="2" 
                        ToolTipProperties.Text="{x:Static res:AppStrings.TooltipCHOPercent}"
                        Keyboard="Numeric" HorizontalTextAlignment="End" />

                    <!-- CheckBox and Label for CHO of raw food -->
                    <StackLayout x:Name="ChoOfRawFoodSection"
                        Grid.Row="1" Grid.Column="2"
                        Orientation="Horizontal"
                        Spacing="0"
                        VerticalOptions="Center"
                        HorizontalOptions="Start"
                        Margin="2,0,0,0">
            <CheckBox x:Name="chkChoOfRawFood"
                VerticalOptions="Center"
                Margin="0"
                ToolTipProperties.Text="{x:Static res:AppStrings.TooltipRawFood}"
                CheckedChanged="OnChoOfRawFoodCheckedChanged" />

         <Label x:Name="lblChoOfRawFood"
            Text="{x:Static res:AppStrings.RawLabel}"
            VerticalOptions="Center"
            VerticalTextAlignment="Center"
            FontSize="11"
            Margin="-10,0,0,0"
            ToolTipProperties.Text="{x:Static res:AppStrings.TooltipRawFood}">
                <Label.GestureRecognizers>
       <TapGestureRecognizer Tapped="OnChoOfRawFoodLabelTapped" />
             </Label.GestureRecognizers>
           </Label>
   </StackLayout>

                    <!-- Calculator button (clickable image) -->
                    <Image Grid.Row="1" Grid.Column="3" 
                        Source="calculator.png"
                        VerticalOptions="Center" HorizontalOptions="Center"
                        WidthRequest="60"
                        HeightRequest="60"
                        Margin="2"
                        ToolTipProperties.Text="{x:Static res:AppStrings.TooltipCalculatorFood}">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Tapped="Calculator_Click" />
                        </Image.GestureRecognizers>
                    </Image>

                </Grid>
                <!--Separator-->
                <Label Grid.Row="3" Grid.ColumnSpan="5" 
                        Text="{x:Static res:AppStrings.WeightDataRawFood}"
                        HorizontalTextAlignment="Center" VerticalTextAlignment="End"
                        FontAttributes="Bold"
                        Margin="0,10,0,5"/>

                <!-- Weight data of raw food portion-->
                <Grid Grid.Row="4" Grid.Column="0"
                      RowDefinitions="20,50"
                      ColumnDefinitions="0.8*,40,0.8*,40,0.8*"
                      Margin="5,0,5,10">
                    <Label Grid.Row="0" Grid.Column="0" Margin="2" Text="{x:Static res:AppStrings.GrossLabel}"
                            HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="2" Margin="2" Text="{x:Static res:AppStrings.TareLabel}"
                            HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="4" Margin="2" Text="{x:Static res:AppStrings.NetLabel}"
                            HorizontalTextAlignment="Center"/>
                    <Entry Grid.Row="1" Grid.Column="0" x:Name="TxtRawGross" 
                       Keyboard="Numeric" HorizontalTextAlignment ="End" Text="" 
                       TextChanged="TxtRawGrossOrTare_TextChanged"
                       Placeholder="[g]" BackgroundColor="PaleGoldenrod" />
                    <Image Grid.Row="1" Grid.Column="1" 
                           Source="pan.png"
                           WidthRequest="50"
                           HeightRequest="50"
                           VerticalOptions="Center" HorizontalOptions="Center"
                           Aspect="AspectFit"
                           Margin="1"
                           ToolTipProperties.Text="{x:Static res:AppStrings.TooltipSelectContainer}">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Tapped="btnRawTareContainer_Click" />
                        </Image.GestureRecognizers>
                    </Image>
                    <Entry Grid.Row="1" Grid.Column="2" x:Name="TxtRawTare" HorizontalTextAlignment ="End" Text="" 
                       Keyboard="Numeric" 
                       TextChanged="TxtRawGrossOrTare_TextChanged"
                       Placeholder="[g]" BackgroundColor="PaleGoldenrod" />
                    <Entry Grid.Row="1" Grid.Column="4" x:Name="TxtRawNet" 
                           HorizontalTextAlignment ="End" Text="" 
                       Keyboard="Numeric" 
                       TextChanged="TxtRawNet_TextChanged"
                       Placeholder="[g]" BackgroundColor="PaleGreen" />
                </Grid>
                <!--Separator-->
                <Label Grid.Row="5" Grid.ColumnSpan="5" 
                       Text="{x:Static res:AppStrings.WeightDataCookedFood}"
                       HorizontalTextAlignment="Center" VerticalTextAlignment="End"
                       FontAttributes="Bold"
                       Margin="0,10,0,5"/>
                <!-- Weight data of cooked portion-->
                <Grid Grid.Row="6" Grid.Column="0" 
                      RowDefinitions="20,50"
                      ColumnDefinitions="0.8*,40,0.8*,40,0.8*"
                      Margin="5,0,5,10">
                    <Label Grid.Row="0" Grid.Column="0" Margin="2" Text="{x:Static res:AppStrings.GrossLabel}"
                            HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="2" Margin="2" Text="{x:Static res:AppStrings.TareLabel}"
                            HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="4" Margin="2" Text="{x:Static res:AppStrings.NetLabel}"
                            HorizontalTextAlignment="Center"/>
                    <Entry Grid.Row="1" Grid.Column="0" x:Name="TxtCookedGross" 
                           HorizontalTextAlignment ="End" Text="" 
                           Keyboard="Numeric" 
                           TextChanged="TxtCookedGrossOrTare_TextChanged"
                           Placeholder="[g]" BackgroundColor="PaleGoldenrod" />
                    <Image Grid.Row="1" Grid.Column="1" 
                           Source="pan.png"
                           WidthRequest="50"
                           HeightRequest="50"
                           VerticalOptions="Center" HorizontalOptions="Center"
                           Aspect="AspectFit"
                           Margin="1"
                           ToolTipProperties.Text="{x:Static res:AppStrings.TooltipSelectContainer}">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Tapped="btnCookedTareContainer_Click" />
                        </Image.GestureRecognizers>
                    </Image>
                    <Entry Grid.Row="1" Grid.Column="2" x:Name="TxtCookedTare"
                           HorizontalTextAlignment ="End" Text="" 
                       Keyboard="Numeric" 
                       TextChanged="TxtCookedGrossOrTare_TextChanged"
                       Placeholder="[g]" BackgroundColor="PaleGoldenrod" />
                    <Entry Grid.Row="1" Grid.Column="4" x:Name="TxtCookedNet"
                           HorizontalTextAlignment ="End" Text="" 
                       Keyboard="Numeric" 
                       TextChanged="TxtCookedNet_TextChanged"
                       Placeholder="[g]" BackgroundColor="PaleGreen" />
                </Grid>
                <!--Separator-->
                <Label Grid.Row="7" Grid.ColumnSpan="5" 
                       Text="{x:Static res:AppStrings.WeightDataCookedPortion}"
                       HorizontalTextAlignment="Center" VerticalTextAlignment="End"
                       FontAttributes="Bold"
                       Margin="0,5,0,5"/>

                <!-- Radio Button options -->
                <Grid Grid.Row="8" Grid.ColumnSpan="5" 
                        Margin="10,5,10,5" 
                        ColumnDefinitions="*,*"
                        RowDefinitions="50"
                        RowSpacing="0">
                    <RadioButton x:Name="rbWeighCookedPortion"
                        Grid.Column="0"
                        Grid.Row="0"
                        Content="{x:Static res:AppStrings.WeighThePortion}"
                        VerticalOptions="Center"
                        HorizontalOptions="Center"
                        GroupName="WeighingOptions"
                        FontSize="14"
                        ToolTipProperties.Text="{x:Static res:AppStrings.TooltipWeighCookedPortion}"
                        CheckedChanged="OnWeighCookedPortionCheckedChanged" />
                    <RadioButton x:Name="rbDivideIntoEqualPortions"
                        Grid.Column="1"
                        Grid.Row="0"
                        Content="{x:Static res:AppStrings.EqualPortions}"
                        VerticalOptions="Center"
                        HorizontalOptions="Center"
                        GroupName="WeighingOptions"
                        FontSize="14"
                        ToolTipProperties.Text="{x:Static res:AppStrings.TooltipEqualPortions}"
                        CheckedChanged="OnDividePortionsCheckedChanged" />
                </Grid>
                <!--Weight data about cooked portion-->
                <Grid Grid.Row="9" Grid.Column="0"
                      x:Name="SectionWeightOfCookedPortion"
                      RowDefinitions="20,50"
                      ColumnDefinitions="0.8*,40,0.8*,40,0.8*"
                      Margin="5,0,5,5">
                    <Label Grid.Row="0" Grid.Column="0" Margin="2" Text="{x:Static res:AppStrings.GrossLabel}"
                            HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="2" Margin="2" Text="{x:Static res:AppStrings.TareLabel}"
                            HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="4" Margin="2" Text="{x:Static res:AppStrings.NetLabel}"
                            HorizontalTextAlignment="Center"/>
                    <Entry Grid.Row="1" Grid.Column="0" x:Name="TxtCookedPortionGross" 
                       Keyboard="Numeric" HorizontalTextAlignment ="End" Text="" 
                       TextChanged="TxtPortionGrossOrTare_TextChanged"
                       Placeholder="[g]" BackgroundColor="PaleGoldenrod" />
                    <Image Grid.Row="1" Grid.Column="1" 
                           Source="pan.png"
                           WidthRequest="50"
                           HeightRequest="50"
                           VerticalOptions="Center" HorizontalOptions="Center"
                           Aspect="AspectFit"
                           Margin="1"
                           ToolTipProperties.Text="{x:Static res:AppStrings.TooltipSelectContainer}">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Tapped="btnPortionTareContainer_Click" />
                        </Image.GestureRecognizers>
                    </Image>
                    <Entry Grid.Row="1" Grid.Column="2" x:Name="TxtCookedPortionTare" HorizontalTextAlignment ="End" Text="" 
                        Keyboard="Numeric" 
                        TextChanged="TxtPortionGrossOrTare_TextChanged"
                        Placeholder="[g]" BackgroundColor="PaleGoldenrod" />
                    <Entry Grid.Row="1" Grid.Column="4" x:Name="TxtCookedPortionNet" HorizontalTextAlignment ="End" Text="" 
                        Keyboard="Numeric" 
                        TextChanged="TxtPortionNet_TextChanged"
                        Placeholder="[g]" BackgroundColor="PaleGreen" />
                </Grid>
                <!--Number of portions-->
                <Grid Grid.Row="9" Grid.Column="0"
                    x:Name="SectionNumberCookedPortion"
                    RowDefinitions="20,50"
                    ColumnDefinitions="*,*,*"
                    Margin="5,0,5,5">
                    <Label Grid.Row="0" Grid.Column="1" Margin="2" Text="{x:Static res:AppStrings.NumberOfPortions}"
                            HorizontalTextAlignment="Center"
                            VerticalTextAlignment="End"
                            HorizontalOptions="Center"/>
                    <Entry Grid.Row="1" Grid.Column="1" x:Name="TxtNPortions" 
                            HorizontalTextAlignment="Center" 
                            VerticalTextAlignment="Center"
                            Text="" 
                            Keyboard="Numeric" 
                            Placeholder="[n]" 
                            BackgroundColor="PaleGreen" />
                </Grid>

                <Label Grid.Row="10" Text="{x:Static res:AppStrings.SummaryData}"
                    HorizontalTextAlignment="Center" VerticalTextAlignment="End"
                    FontAttributes="Bold"
                    Margin="0,10,0,5"/>
                <Grid Grid.Row="11" Grid.Column="0"
                    RowDefinitions="Auto,Auto"
                    ColumnDefinitions="*,*,*"
                    Margin="5,0,5,10">
                    <Label Grid.Row="0" Grid.Column="0" Margin="2" Text="{x:Static res:AppStrings.CHOOfPortion}"
                        HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="1" Margin="2" Text="{x:Static res:AppStrings.WeightOfPortion}"
                        HorizontalTextAlignment="Center" />
                    <Label Grid.Row="0" Grid.Column="2" Margin="2" Text="{x:Static res:AppStrings.RawCookedRatio}"
                        HorizontalTextAlignment="Center" />
                    <Entry Grid.Row="1" Grid.Column="0" x:Name="TxtCarboydratesOfPortion" 
                    Keyboard="Numeric" HorizontalTextAlignment ="End" Text="" 
                    Placeholder="[g]" 
                    BackgroundColor="CadetBlue" TextColor="White" />
                    <Entry Grid.Row="1" Grid.Column="1" x:Name="TxtWeightOfPortion" HorizontalTextAlignment ="End" Text="" 
                    Keyboard="Numeric" Placeholder="[g]"
                    BackgroundColor="DeepSkyBlue" TextColor="Black"/>
                    <Entry Grid.Row="1" Grid.Column="2" x:Name="TxtRawByCooked" HorizontalTextAlignment ="End" Text="" 
                    Keyboard="Numeric" Placeholder="[g]"
                    BackgroundColor="DeepSkyBlue" TextColor="Black"/>
                </Grid>
            </Grid>
        </ScrollView>
    </ContentPage.Content>
</ContentPage>